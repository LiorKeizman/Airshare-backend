import{_ as c,r as _,o as i,c as U,a as r,b as w,d as s,t as g,L as y,w as u,v as p,F as m,e as h,f}from"./index.e70235e1.js";const b={name:"Google",data(){return{callback:l=>{console.log("Handle the response",l)}}}};function v(l,e,a,d,o,n){const t=_("GoogleLogin",!0);return i(),U(t,{callback:o.callback},null,8,["callback"])}const C=c(b,[["render",v]]),L={uploadImg:x};function x(l){const e="dcwibf9o5",a="vt0iqgff",d=`https://api.cloudinary.com/v1_1/${e}/image/upload`,o=new FormData;return o.append("upload_preset",a),o.append("file",l.target.files[0]),fetch(d,{method:"POST",body:o}).then(n=>n.json()).then(n=>n).catch(n=>console.error(n))}const k={data(){return{imgUrl:null,height:500,width:500,isUploading:!1}},methods:{async uploadImg(l){this.isUploading=!0;const{secure_url:e,height:a,width:d}=await L.uploadImg(l);this.isUploading=!1,this.imgUrl=e,this.height=a,this.width=d,this.$emit("uploaded",this.imgUrl)}},computed:{uploadMsg(){return this.imgUrl?"Upload Another?":this.isUploading?"Uploading....":"Upload Image"}}},S={className:"upload-preview"},I=["src"],F={for:"imgUpload"};function D(l,e,a,d,o,n){return i(),r("div",S,[o.imgUrl?(i(),r("img",{key:0,src:o.imgUrl,style:{maxWidth:"200px",float:"right"}},null,8,I)):w("",!0),s("label",F,g(n.uploadMsg),1),s("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>n.uploadImg&&n.uploadImg(...t)),accept:"img/*",id:"imgUpload"},null,32)])}const P=c(k,[["render",D]]),V="",E={name:"login-signup",components:{imgUploader:P,GoogleLogin:y,google:C},data(){return{newUser:!1,msg:"",loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:"",imgUrl:"https://res.cloudinary.com/sprint4-triman/image/upload/v1669793675/elon_mask_ltbtp6.jpg",wishList:[]}}},computed:{users(){return this.$store.getters.users},loggedinUser(){return this.$store.getters.loggedinUser},googleClientId(){return V}},created(){this.loadUsers()},methods:{toggleForm(){this.newUser=!this.newUser,this.msg=""},async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/home")}catch(l){console.log(l),this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill up the form";return}await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/home")},loadUsers(){this.$store.dispatch({type:"loadUsers"})},async removeUser(l){try{await this.$store.dispatch({type:"removeUser",userId:l}),this.msg="User removed"}catch{this.msg="Failed to remove user"}}}},G={class:"login-container"},N=s("div",{class:"overlay-login"},null,-1),O={key:0,class:"flex column align-center"},M={class:"login-form-body flex column"},A=s("h1",null,"Welcome back",-1),B={class:"cell"},T=s("div",{class:"content"},[s("button",{type:"submit",class:"action-btn"},[s("span",null,"Submit")])],-1),$={class:"login-actions-btns flex"},j={key:1,class:"flex column align-center"},R={class:"login-form-body flex column"},W=s("h1",null,"Sign up",-1),q={class:"cell"},H=s("div",{class:"content"},[s("button",{type:"submit",class:"action-btn"},[s("span",null,"Sign up")])],-1),z={class:"login-actions-btns flex"};function J(l,e,a,d,o,n){return i(),r("main",G,[N,this.newUser?(i(),r("section",j,[s("form",{class:"login-form",onSubmit:e[10]||(e[10]=f((...t)=>n.doSignup&&n.doSignup(...t),["prevent"]))},[s("div",R,[W,u(s("input",{type:"text",class:"login-input",name:"fullname",placeholder:"Full name","onUpdate:modelValue":e[5]||(e[5]=t=>o.signupCred.fullname=t)},null,512),[[p,o.signupCred.fullname]]),u(s("input",{autocomplete:"password",name:"password",class:"login-input",type:"password",placeholder:"Password","onUpdate:modelValue":e[6]||(e[6]=t=>o.signupCred.password=t)},null,512),[[p,o.signupCred.password]]),u(s("input",{autocomplete:"username",type:"text",class:"login-input",name:"username",placeholder:"Username","onUpdate:modelValue":e[7]||(e[7]=t=>o.signupCred.username=t)},null,512),[[p,o.signupCred.username]]),s("p",null,g(o.msg),1),s("div",{onClick:e[8]||(e[8]=(...t)=>n.doSignup&&n.doSignup(...t)),class:"btn-container"},[(i(),r(m,null,h(100,t=>s("div",q)),64)),H]),s("div",z,[s("button",{type:"button",class:"actions-btn",onClick:e[9]||(e[9]=t=>n.toggleForm())},"I already have an account")])])],32)])):(i(),r("section",O,[s("form",{class:"login-form",onSubmit:e[4]||(e[4]=f((...t)=>n.doLogin&&n.doLogin(...t),["prevent"]))},[s("div",M,[A,u(s("input",{autocomplete:"username",type:"text",class:"login-input",name:"username",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=t=>o.loginCred.username=t)},null,512),[[p,o.loginCred.username]]),u(s("input",{autocomplete:"password",type:"password",class:"login-input",name:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=t=>o.loginCred.password=t)},null,512),[[p,o.loginCred.password]]),s("p",null,g(o.msg),1),s("div",{onClick:e[2]||(e[2]=(...t)=>n.doLogin&&n.doLogin(...t)),class:"btn-container"},[(i(),r(m,null,h(100,t=>s("div",B)),64)),T]),s("div",$,[s("button",{type:"button",class:"actions-btn",onClick:e[3]||(e[3]=t=>n.toggleForm())},"New user?")])])],32)]))])}const Q=c(E,[["render",J]]);export{Q as default};
