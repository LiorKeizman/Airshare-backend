import{_ as c,r as _,o as i,i as U,h as r,j as w,k as s,u as g,L as y,m as d,n as p,F as m,l as h,w as f}from"./index.a0f7aa64.js";const C={name:"Google",data(){return{callback:l=>{console.log("Handle the response",l)}}}};function b(l,e,a,u,n,o){const t=_("GoogleLogin",!0);return i(),U(t,{callback:n.callback},null,8,["callback"])}const v=c(C,[["render",b]]),L={uploadImg:k};function k(l){const e="dcwibf9o5",a="vt0iqgff",u=`https://api.cloudinary.com/v1_1/${e}/image/upload`,n=new FormData;return n.append("upload_preset",a),n.append("file",l.target.files[0]),fetch(u,{method:"POST",body:n}).then(o=>o.json()).then(o=>o).catch(o=>console.error(o))}const x={data(){return{imgUrl:null,height:500,width:500,isUploading:!1}},methods:{async uploadImg(l){this.isUploading=!0;const{secure_url:e,height:a,width:u}=await L.uploadImg(l);this.isUploading=!1,this.imgUrl=e,this.height=a,this.width=u,this.$emit("uploaded",this.imgUrl)}},computed:{uploadMsg(){return this.imgUrl?"Upload Another?":this.isUploading?"Uploading....":"Upload Image"}}},S={className:"upload-preview"},I=["src"],F={for:"imgUpload"};function D(l,e,a,u,n,o){return i(),r("div",S,[n.imgUrl?(i(),r("img",{key:0,src:n.imgUrl,style:{maxWidth:"200px",float:"right"}},null,8,I)):w("",!0),s("label",F,g(o.uploadMsg),1),s("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>o.uploadImg&&o.uploadImg(...t)),accept:"img/*",id:"imgUpload"},null,32)])}const P=c(x,[["render",D]]),V="",E={name:"login-signup",components:{imgUploader:P,GoogleLogin:y,google:v},data(){return{newUser:!1,msg:"",loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:"",imgUrl:"https://res.cloudinary.com/sprint4-triman/image/upload/v1669793675/elon_mask_ltbtp6.jpg",wishList:[]}}},computed:{users(){return this.$store.getters.users},loggedinUser(){return this.$store.getters.loggedinUser},googleClientId(){return V}},created(){this.loadUsers()},methods:{toggleForm(){this.newUser=!this.newUser,this.msg=""},async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/")}catch(l){console.log(l),this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill up the form";return}console.log("this.signupCred:",this.signupCred),await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/")},loadUsers(){this.$store.dispatch({type:"loadUsers"})},async removeUser(l){try{await this.$store.dispatch({type:"removeUser",userId:l}),this.msg="User removed"}catch{this.msg="Failed to remove user"}}}},G={class:"login-container"},N=s("div",{class:"overlay-login"},null,-1),O={key:0,class:"flex column align-center"},M={class:"login-form-body flex column"},A=s("h1",null,"Welcome back",-1),B={class:"cell"},T=s("div",{class:"content"},[s("button",{type:"submit",class:"action-btn"},[s("span",null,"Submit")])],-1),$={class:"login-actions-btns flex"},j={key:1,class:"flex column align-center"},R={class:"login-form-body flex column"},W=s("h1",null,"Sign up",-1),q={class:"cell"},H=s("div",{class:"content"},[s("button",{type:"submit",class:"action-btn"},[s("span",null,"Sign up")])],-1),z={class:"login-actions-btns flex"};function J(l,e,a,u,n,o){return i(),r("main",G,[N,this.newUser?(i(),r("section",j,[s("form",{class:"login-form",onSubmit:e[10]||(e[10]=f((...t)=>o.doSignup&&o.doSignup(...t),["prevent"]))},[s("div",R,[W,d(s("input",{type:"text",class:"login-input",name:"fullname",placeholder:"Full name","onUpdate:modelValue":e[5]||(e[5]=t=>n.signupCred.fullname=t)},null,512),[[p,n.signupCred.fullname]]),d(s("input",{autocomplete:"password",name:"password",class:"login-input",type:"password",placeholder:"Password","onUpdate:modelValue":e[6]||(e[6]=t=>n.signupCred.password=t)},null,512),[[p,n.signupCred.password]]),d(s("input",{autocomplete:"username",type:"text",class:"login-input",name:"username",placeholder:"Username","onUpdate:modelValue":e[7]||(e[7]=t=>n.signupCred.username=t)},null,512),[[p,n.signupCred.username]]),s("p",null,g(n.msg),1),s("div",{onClick:e[8]||(e[8]=(...t)=>o.doSignup&&o.doSignup(...t)),class:"btn-container"},[(i(),r(m,null,h(100,t=>s("div",q)),64)),H]),s("div",z,[s("button",{type:"button",class:"actions-btn",onClick:e[9]||(e[9]=t=>o.toggleForm())},"I already have an account")])])],32)])):(i(),r("section",O,[s("form",{class:"login-form",onSubmit:e[4]||(e[4]=f((...t)=>o.doLogin&&o.doLogin(...t),["prevent"]))},[s("div",M,[A,d(s("input",{autocomplete:"username",type:"text",class:"login-input",name:"username",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=t=>n.loginCred.username=t)},null,512),[[p,n.loginCred.username]]),d(s("input",{autocomplete:"password",type:"password",class:"login-input",name:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=t=>n.loginCred.password=t)},null,512),[[p,n.loginCred.password]]),s("p",null,g(n.msg),1),s("div",{onClick:e[2]||(e[2]=(...t)=>o.doLogin&&o.doLogin(...t)),class:"btn-container"},[(i(),r(m,null,h(100,t=>s("div",B)),64)),T]),s("div",$,[s("button",{type:"button",class:"actions-btn",onClick:e[3]||(e[3]=t=>o.toggleForm())},"New user?")])])],32)]))])}const Q=c(E,[["render",J]]);export{Q as default};
