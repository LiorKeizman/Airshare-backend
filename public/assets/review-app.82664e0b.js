import{_ as w,h as m,i as f,a as r,d as t,F as u,e as c,f as g,w as p,n as U,v as b,b as x,r as y,o,p as a,q as v,u as _,t as d}from"./index.e70235e1.js";const E={data(){return{reviewToEdit:{txt:"",aboutUserId:null}}},computed:{reviews(){return this.$store.getters.reviews},users(){return this.$store.getters.users},loggedInUser(){return this.$store.getters.loggedinUser}},created(){this.$store.dispatch({type:"loadUsers"}),this.$store.dispatch({type:"loadReviews"})},methods:{async addReview(){try{await this.$store.dispatch({type:"addReview",review:this.reviewToEdit}),m("Review added"),this.reviewToEdit={txt:"",aboutUserId:null}}catch{f("Cannot add review")}}}},T={class:"container home"},k={class:"review-list"},I=t("hr",null,null,-1),M=t("h2",null,"Your gossip:",-1),V=["value"],R=t("button",null,"Save",-1);function S(h,s,$,B,i,n){const l=y("router-link");return o(),r("div",T,[t("ul",k,[(o(!0),r(u,null,c(n.reviews,e=>(o(),r("li",{key:e._id},[t("p",null,[a(" About "),v(l,{to:`user/${e.aboutUser._id}`},{default:_(()=>[a(d(e.aboutUser.fullname),1)]),_:2},1032,["to"])]),t("pre",null,d(e.txt),1),t("p",null,[a("By "),v(l,{to:`user/${e.byUser._id}`},{default:_(()=>[a(d(e.byUser.fullname),1)]),_:2},1032,["to"])])]))),128))]),I,n.loggedInUser?(o(),r("form",{key:0,onSubmit:s[2]||(s[2]=g(e=>n.addReview(),["prevent"]))},[M,p(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.reviewToEdit.aboutUserId=e)},[(o(!0),r(u,null,c(n.users,e=>(o(),r("option",{key:e._id,value:e._id},d(e.fullname),9,V))),128))],512),[[U,i.reviewToEdit.aboutUserId]]),p(t("textarea",{placeholder:"Your Opinion Matters...","onUpdate:modelValue":s[1]||(s[1]=e=>i.reviewToEdit.txt=e)},null,512),[[b,i.reviewToEdit.txt]]),R],32)):x("",!0)])}const N=w(E,[["render",S]]);export{N as default};
